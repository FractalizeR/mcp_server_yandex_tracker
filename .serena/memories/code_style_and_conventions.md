# –°—Ç–∏–ª—å –∫–æ–¥–∞ –∏ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

## TypeScript –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ö–†–ò–¢–ò–ß–ù–û)
- ‚ùå **–ó–ê–ü–†–ï–©–ï–ù–û:** `any`, `unknown`, `null`, `undefined` (–≥–¥–µ –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å)
- ‚úÖ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –Ø–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ `import type` –¥–ª—è type-only –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ Type inference –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ: `type Params = z.infer<typeof ParamsSchema>`

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ
- **–ö–ª–∞—Å—Å—ã:** PascalCase (`BaseTool`, `GetIssuesOperation`)
- **–§–∞–π–ª—ã:** kebab-case (`base-tool.ts`, `get-issues.operation.ts`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** SCREAMING_SNAKE_CASE (`MAX_BATCH_SIZE`, `TYPES`)
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ/—Ñ—É–Ω–∫—Ü–∏–∏:** camelCase (`executeOperation`, `trackerFacade`)
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:** PascalCase –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ `I` (`CacheManager`, `RetryStrategy`)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
- **–û–¥–∏–Ω –∫–ª–∞—Å—Å = –æ–¥–∏–Ω —Ñ–∞–π–ª** = –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- **Feature-by-Folder:** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –Ω–µ –ø–æ —Ç–∏–ø—É
- **Tool:** `src/mcp/tools/{api|helpers}/{feature}/{action}/{name}.tool.ts`
- **Operation:** `src/tracker_api/api_operations/{feature}/{action}/{name}.operation.ts`

### –ü—Ä–∞–≤–∏–ª–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ **@ –∞–ª–∏–∞—Å—ã** –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏/—Ñ–∏—á–∞–º–∏
  - `@mcp/tools/...`
  - `@tracker_api/...`
  - `@infrastructure/...`
  - `@composition-root/...`
- ‚úÖ **–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏** –¢–û–õ–¨–ö–û:
  - –í `index.ts` –¥–ª—è —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑ —Ç–æ–π –∂–µ –ø–∞–ø–∫–∏
  - –í–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –ø–∞–ø–∫–∏
- ‚ùå **–ó–ê–ü–†–ï–©–ï–ù–û:** `../` (–ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –ø–∞–ø–∫—É)
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:** –≤—Å–µ–≥–¥–∞ `.js` (–Ω–µ `.ts`) –¥–ª—è ESM —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

### Single Responsibility Principle (SRP)
- –û–¥–∏–Ω –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –¢–û–õ–¨–ö–û –∑–∞ –æ–¥–Ω—É –æ–ø–µ—Ä–∞—Ü–∏—é
- ‚úÖ `PingOperation` ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ `GetIssuesOperation` ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á
- ‚ùå `IssueOperations` —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–æ–≤

### Dependency Injection
- **–ü–æ–¥—Ö–æ–¥:** InversifyJS v7
- **–¢–æ–∫–µ–Ω—ã:** Symbol-based (`TYPES.*`), –ù–ï bind –ø–æ –∫–ª–∞—Å—Å—É
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `toDynamicValue()`, –ù–ï –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@injectable()`
- **Scope:** `defaultScope: 'Singleton'` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:** –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ constructor injection

### Layered Architecture
- `infrastructure` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-—Å–ª–æ–∏
- `tracker_api` –ù–ï –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `mcp`
- MCP tools –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¢–û–õ–¨–ö–û `Facade`, –ù–ï `Operations` –Ω–∞–ø—Ä—è–º—É—é
- `composition-root` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –≤ `src/index.ts`

## –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π Zod –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ tools
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–π —Å—Ö–µ–º—ã –∏–∑ `@mcp/tools/common/schemas/`
- ‚úÖ Type inference: `type Params = z.infer<typeof ParamsSchema>`
- ‚ùå –ù–ï —Å–æ–∑–¥–∞–≤–∞–π –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã

### –§–ª–∞–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –ï—Å–ª–∏ tool **–ò–ó–ú–ï–ù–Ø–ï–¢** –¥–∞–Ω–Ω—ã–µ ‚Üí `requiresExplicitUserConsent: true`
- ‚úÖ –ï—Å–ª–∏ tool —Ç–æ–ª—å–∫–æ **–ß–ò–¢–ê–ï–¢** ‚Üí –ù–ï –¥–æ–±–∞–≤–ª—è–π —Ñ–ª–∞–≥ (–∏–ª–∏ `false`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: `npm run validate:tools`

### –ü—Ä–∏–º–µ—Ä—ã –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- `update`, `create`, `delete`, `transition`, `execute`

### –ü—Ä–∏–º–µ—Ä—ã read-only –æ–ø–µ—Ä–∞—Ü–∏–π
- `get`, `find`, `search`, `list`, `ping`

## MCP Tools –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Tool
```
{feature}/{action}/
‚îú‚îÄ‚îÄ {action}-{feature}.schema.ts     # Zod —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ {action}-{feature}.definition.ts # Tool definition
‚îú‚îÄ‚îÄ {action}-{feature}.tool.ts       # Tool implementation
‚îî‚îÄ‚îÄ index.ts                         # –†–µ—ç–∫—Å–ø–æ—Ä—Ç
```

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Tool
1. **`static readonly METADATA: StaticToolMetadata`** ‚Äî –¥–ª—è Tool Search
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π `validateParams()`
3. **Response Field Filter** ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–π –ø–æ–ª—è –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
4. **Batch Result Processor** ‚Äî –¥–ª—è batch-–æ–ø–µ—Ä–∞—Ü–∏–π
5. **Result Logger** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Tool
- –î–æ–±–∞–≤–∏—Ç—å **1 —Å—Ç—Ä–æ–∫—É** –≤ `src/composition-root/definitions/tool-definitions.ts`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ DI
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `npm run validate:tools`

## API Operations –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Operation
- –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `BaseOperation`
- –û–¥–∏–Ω –º–µ—Ç–æ–¥ `execute(...)` ‚Äî –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è
- –î–ª—è batch ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ParallelExecutor`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `BatchResult<T>` –¥–ª—è batch-–æ–ø–µ—Ä–∞—Ü–∏–π

### Batch-–æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `getIssues([keys])` ‚Äî –ù–ï `getIssue(key)`
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å throttling
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–∏–º–∏—Ç—ã: `MAX_BATCH_SIZE=200`, `MAX_CONCURRENT_REQUESTS=5`

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Operation
- –î–æ–±–∞–≤–∏—Ç—å **1 —Å—Ç—Ä–æ–∫—É** –≤ `src/composition-root/definitions/operation-definitions.ts`
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ `YandexTrackerFacade`
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `npm run validate:tools`

## Entities –∏ DTO

### Entity (–≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å **—Ç–æ–ª—å–∫–æ known –ø–æ–ª—è–º–∏**
- `{Name}WithUnknownFields = WithUnknownFields<{Name}>` –¥–ª—è API –æ—Ç–≤–µ—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ forward compatibility (unknown –ø–æ–ª—è)

### DTO (–∏—Å—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ)
- Input DTO: –º–æ–∂–Ω–æ `[key: string]: unknown` –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø–æ–ª–µ–π
- Update DTO: –≤—Å–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
- NO index signature –¥–ª—è —Å—Ç—Ä–æ–≥–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Pino structured logging
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π **Pino**, –ù–ï `console.log`
- ‚úÖ Dual output: error/warn ‚Üí stderr + —Ñ–∞–π–ª, info/debug ‚Üí —Ñ–∞–π–ª
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- ‚ö†Ô∏è MCP stdio: stdout –¥–ª—è JSON-RPC, stderr –¥–ª—è –ª–æ–≥–æ–≤

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
```typescript
logger.info({ context: '–æ–ø–µ—Ä–∞—Ü–∏—è', data }, '—Å–æ–æ–±—â–µ–Ω–∏–µ');
logger.error({ err, context: '–æ–ø–µ—Ä–∞—Ü–∏—è' }, '–æ—à–∏–±–∫–∞');
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
- Unit —Ç–µ—Å—Ç—ã –≤ `tests/unit/` (–∑–µ—Ä–∫–∞–ª–∏—Ä—É—é—Ç `src/`)
- Coverage ‚â•80%
- Vitest —Å ESM –∏ TypeScript
- –ò–º–ø–æ—Ä—Ç—ã —Å `.js` —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏

### AAA –ø–∞—Ç—Ç–µ—Ä–Ω
```typescript
describe('Component', () => {
  it('should do something', () => {
    // Arrange
    const input = ...;
    
    // Act
    const result = ...;
    
    // Assert
    expect(result).toBe(...);
  });
});
```

### –ü—Ä–∏ –±–∞–≥—Ñ–∏–∫—Å–µ
- –í–°–ï–ì–î–ê –¥–æ–±–∞–≤–ª—è–π —Ç–µ—Å—Ç, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è—â–∏–π –±–∞–≥
- –°–Ω–∞—á–∞–ª–∞ failing test, –ø–æ—Ç–æ–º —Ñ–∏–∫—Å

## –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Prettier
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ pre-commit hook
- ‚ùå –ù–ï —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π –≤—Ä—É—á–Ω—É—é
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `.prettierrc.json`

### ESLint –ø—Ä–∞–≤–∏–ª–∞
- `max-params` ‚â§4
- `complexity` ‚â§10
- `max-depth` ‚â§4
- –†–µ–∂–∏–º `warn` ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç build

## Git –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –ö–æ–º–º–∏—Ç—ã
```
<—Ç–∏–ø>: –æ–ø–∏—Å–∞–Ω–∏–µ

–î–µ—Ç–∞–ª–∏:
- –ß—Ç–æ/–ø–æ—á–µ–º—É/–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

ü§ñ Generated with Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
```

### –¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤
- `feat`: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix`: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `refactor`: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è API
- `docs`: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `test`: —Ç–µ—Å—Ç—ã
- `chore`: —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –õ–∏–º–∏—Ç—ã
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ ‚â§72 —Å–∏–º–≤–æ–ª–∞
- Body ‚â§100 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å—Ç—Ä–æ–∫—É
