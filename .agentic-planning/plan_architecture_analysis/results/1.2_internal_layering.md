# Yandex-Tracker Internal Layering Analysis

**ะะฐัะฐ:** 2025-11-21
**ะะฒัะพั:** Claude Code

---

## ๐ฏ ะฆะตะปั

ะัะพะฒะตัะบะฐ ัะพะฑะปัะดะตะฝะธั ะฒะฝัััะตะฝะฝะตะน ัะปะพะธััะพััะธ ะฒ ะฟะฐะบะตัะต Yandex-Tracker.

---

## ๐ ะััะธัะตะบัััะฐ ัะปะพะตะฒ

### ะะถะธะดะฐะตะผะฐั ััััะบัััะฐ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ     Entry Point (index.ts)          โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
โ     Composition Root (DI)            โ โ ะัััะธะน ััะพะฒะตะฝั
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
โ     MCP Layer (tools)                โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ (ัะตัะตะท Facade)
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
โ     Facade (ะบะพะพัะดะธะฝะฐัะธั)             โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโ
โ     Tracker API (operations/dto)     โ โ ะะธะทัะธะน ััะพะฒะตะฝั
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะคะฐะบัะธัะตัะบะฐั ััััะบัััะฐ ะดะธัะตะบัะพัะธะน:

```
src/
โโโ cli/                    (CLI ะธะฝััััะผะตะฝัั)
โโโ common/                 (ะะฑัะธะต ััะตะผั ะธ ััะธะปะธัั)
โโโ composition-root/       (DI ะบะพะฝัะตะนะฝะตั)
โโโ tools/                  (MCP ัะปะพะน)
โ   โโโ api/
โ   โโโ helpers/
โโโ tracker_api/           (Tracker API ัะปะพะน)
    โโโ api_operations/    (ะะฟะตัะฐัะธะธ API)
    โโโ dto/               (Data Transfer Objects)
    โโโ entities/          (ะะธะทะฝะตั-ัััะฝะพััะธ)
    โโโ facade/            (ะคะฐัะฐะด ะดะปั MCP ัะปะพั)
    โโโ utils/
```

---

## ๐ ะะตะทัะปััะฐัั ะฟัะพะฒะตัะพะบ

### โ 1. ะะทะพะปััะธั tracker_api ะพั MCP ัะปะพั

**ะัะพะฒะตัะบะฐ:** tracker_api ะฝะต ะธะผะฟะพััะธััะตั ะธะท #tools

```bash
grep -r "from ['\"]#tools" packages/servers/yandex-tracker/src/tracker_api/ --include="*.ts"
```

**ะะตะทัะปััะฐั:** โ OK - tracker_api ะฝะต ะธะผะฟะพััะธััะตั ะธะท MCP ัะปะพั (#tools)

**ะัะฒะพะด:** ะะธะถะฝะธะน ัะปะพะน (tracker_api) ะฟะพะปะฝะพัััั ะธะทะพะปะธัะพะฒะฐะฝ ะพั ะฒะตััะฝะตะณะพ ัะปะพั (MCP tools). โ

---

### โ 2. MCP tools ะธัะฟะพะปัะทััั ัะพะปัะบะพ Facade

**ะัะพะฒะตัะบะฐ:** MCP tools ะฝะต ะธะผะฟะพััะธัััั Operations ะฝะฐะฟััะผัั

```bash
grep -r "from ['\"]#tracker_api/api_operations" packages/servers/yandex-tracker/src/tools/ --include="*.ts"
```

**ะะตะทัะปััะฐั:** โ ะะตั ะฟััะผัั ะธะผะฟะพััะพะฒ Operations

**ะัะพะฒะตัะบะฐ:** MCP tools ะธัะฟะพะปัะทััั Facade

```bash
grep -r "from ['\"]#tracker_api/facade" packages/servers/yandex-tracker/src/tools/ --include="*.ts" | wc -l
```

**ะะตะทัะปััะฐั:** 49 ัะฐะนะปะพะฒ ะธัะฟะพะปัะทััั facade

**ะัะฒะพะด:** MCP tools ะฟัะฐะฒะธะปัะฝะพ ะธัะฟะพะปัะทััั Facade ะบะฐะบ ะตะดะธะฝัั ัะพัะบั ะฒัะพะดะฐ ะฒ Tracker API. โ

---

### โ 3. Composition Root ะฝะฐ ะฒะตััะธะฝะต

**ะัะพะฒะตัะบะฐ:** composition-root ะธะผะฟะพััะธััะตััั ัะพะปัะบะพ ะธะท index.ts

```bash
grep -r "from.*#composition-root" packages/servers/yandex-tracker/src/ --include="*.ts" \
  --exclude-dir=composition-root | grep -v "index.ts"
```

**ะะตะทัะปััะฐั:** โ OK - composition-root ะธะผะฟะพััะธััะตััั ัะพะปัะบะพ ะธะท index.ts

**ะัะฒะพะด:** DI ะบะพะฝัะตะนะฝะตั ะฝะฐัะพะดะธััั ะฝะฐ ะฒะตััะธะฝะต ะธะตัะฐััะธะธ ะธ ะฝะต ะธะผะฟะพััะธััะตััั ะธะท ะฑะธะทะฝะตั-ะปะพะณะธะบะธ. โ

---

### โน๏ธ 4. ะะผะฟะพััั framework ะฟะฐะบะตัะพะฒ ะฒ tracker_api

**ะะฑะฝะฐััะถะตะฝะพ:** tracker_api ะธะผะฟะพััะธััะตั ะธะท @mcp-framework/infrastructure

**ะัะธะผะตัั:**
- `EntityCacheKey, EntityType` (ะบััะธัะพะฒะฐะฝะธะต)
- `HttpClient, CacheManager, Logger` (ะฑะฐะทะพะฒัะต ัะตัะฒะธัั)
- `ParallelExecutor` (ะฟะฐัะฐะปะปะตะปัะฝะพะต ะฒัะฟะพะปะฝะตะฝะธะต)
- `ServerConfig, ApiError, BatchResult` (ัะธะฟั)

**ะัะตะฝะบะฐ:** โ ะญะขะ ะะะะะะะฌะะ

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**
- @mcp-framework/infrastructure ััะพ framework ะฟะฐะบะตั (ะฝะธะทัะธะน ััะพะฒะตะฝั ะฐััะธัะตะบัััั)
- tracker_api ัะฒะปัะตััั ะดะพะผะตะฝะฝัะผ ัะปะพะตะผ, ะบะพัะพััะน ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัั framework
- ะะฐัััะตะฝะธะตะผ ะฑัะปะพ ะฑั ะธะผะฟะพััะธัะพะฒะฐะฝะธะต ะธะท #tools (MCP ัะปะพะน) ะธะปะธ ะดััะณะธั ะดะพะผะตะฝะฝัั ะผะพะดัะปะตะน

---

## ๐ฏ ะัะฐั ะทะฐะฒะธัะธะผะพััะตะน ัะปะพะตะฒ

### ะะตะฐะปัะฝัะน ะณัะฐั (ะฒะฝัััะธ Yandex-Tracker):

```
composition-root
    โ
tools (MCP)
    โ
facade
    โ
api_operations โ entities โ dto
    โ
utils
```

### ะะฝะตัะฝะธะต ะทะฐะฒะธัะธะผะพััะธ:

```
All Layers โ @mcp-framework/infrastructure (framework)
composition-root โ inversify (DI library)
tools โ @mcp-framework/core (BaseTool)
```

---

## ๐ ะะตััะธะบะธ

### ะะทะพะปััะธั ัะปะพะตะฒ

| ะัะพะฒะตัะบะฐ | ะะตะทัะปััะฐั | ะกัะฐััั |
|----------|-----------|--------|
| tracker_api โ MCP tools | 0 ะธะผะฟะพััะพะฒ | โ PASS |
| MCP tools โ Operations (bypass facade) | 0 ะธะผะฟะพััะพะฒ | โ PASS |
| MCP tools โ Facade | 49 ัะฐะนะปะพะฒ | โ PASS |
| composition-root ะธัะฟะพะปัะทัะตััั ะฒะฝะต entry point | 0 ะธัะฟะพะปัะทะพะฒะฐะฝะธะน | โ PASS |

### ะกะพะฑะปัะดะตะฝะธะต ะฟะฐััะตัะฝะพะฒ

| ะะฐััะตัะฝ | ะกะพะฑะปัะดะตะฝะธะต | ะะพะผะผะตะฝัะฐัะธะน |
|---------|------------|-------------|
| Facade Pattern | โ YES | MCP ัะปะพะน ะธัะฟะพะปัะทัะตั Facade ะดะปั ะดะพัััะฟะฐ ะบ API |
| Dependency Injection | โ YES | composition-root ะฝะฐ ะฒะตััะธะฝะต ะธะตัะฐััะธะธ |
| Layered Architecture | โ YES | ะงะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ัะปะพะตะฒ |
| Single Direction Flow | โ YES | ะะฐะฒะธัะธะผะพััะธ ะธะดัั ัะพะปัะบะพ ะฒะฝะธะท |

---

## ๐ก ะัะฒะพะดั

### โ ะกะธะปัะฝัะต ััะพัะพะฝั

1. **ะงะตัะบะฐั ัะปะพะธััะพััั:** ะัะต ัะปะพะธ ะธะผะตัั ะพะฟัะตะดะตะปะตะฝะฝัะต ะณัะฐะฝะธัั ะธ ะพัะฒะตัััะฒะตะฝะฝะพััะธ
2. **ะะทะพะปััะธั tracker_api:** ะะธะถะฝะธะน ัะปะพะน API ะฟะพะปะฝะพัััั ะธะทะพะปะธัะพะฒะฐะฝ ะพั MCP ัะปะพั
3. **ะัะฐะฒะธะปัะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต Facade:** MCP tools ะฝะต ะพะฑัะฐัะฐัััั ะบ Operations ะฝะฐะฟััะผัั
4. **DI ะฝะฐ ะฒะตััะธะฝะต:** composition-root ะฟัะฐะฒะธะปัะฝะพ ัะฐัะฟะพะปะพะถะตะฝ ะฝะฐ ะฒัััะตะผ ััะพะฒะฝะต
5. **ะะฐะฟัะฐะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพััะตะน:** ะัะต ะทะฐะฒะธัะธะผะพััะธ ะธะดัั ัััะพะณะพ ะฒะฝะธะท ะฟะพ ัะปะพัะผ

### ๐ฏ SOLID Compliance (ะฝะฐ ััะพะฒะฝะต ะฒะฝัััะตะฝะฝะตะน ะฐััะธัะตะบัััั)

| ะัะธะฝัะธะฟ | ะกัะฐััั | ะะพะผะผะตะฝัะฐัะธะน |
|---------|--------|-------------|
| SRP | โ PASS | ะะฐะถะดัะน ัะปะพะน ะธะผะตะตั ะพะดะฝั ะพัะฒะตัััะฒะตะฝะฝะพััั |
| OCP | โ PASS | Facade ะฟะพะทะฒะพะปัะตั ัะฐััะธัััั API ะฑะตะท ะธะทะผะตะฝะตะฝะธั MCP ัะปะพั |
| LSP | โ PASS | BaseTool ะธัะฟะพะปัะทัะตััั ะบะพะฝัะธััะตะฝัะฝะพ |
| ISP | โ PASS | Facade ะฟัะตะดะพััะฐะฒะปัะตั ัะพะปัะบะพ ะฝะตะพะฑัะพะดะธะผัะต ะผะตัะพะดั |
| DIP | โ PASS | ะะฐะฒะธัะธะผะพััั ะพั ะฐะฑัััะฐะบัะธะน ัะตัะตะท DI |

---

## ๐ ะะตะบะพะผะตะฝะดะฐัะธะธ

### ๐ข ะัะต ะฟัะพะฒะตัะบะธ ะฟัะพะนะดะตะฝั ััะฟะตัะฝะพ

**ะะตั ะบัะธัะธัะตัะบะธั ะธะปะธ ะฒะฐะถะฝัั ะฟัะพะฑะปะตะผ.**

ะะฝัััะตะฝะฝัั ัะปะพะธััะพััั Yandex-Tracker ะฝะฐัะพะดะธััั ะฒ ะพัะปะธัะฝะพะผ ัะพััะพัะฝะธะธ.

#### ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ):

1. **ะะพะบัะผะตะฝัะฐัะธั ัะปะพะตะฒ:** ะะพะฑะฐะฒะธัั ะดะธะฐะณัะฐะผะผั ัะปะพะตะฒ ะฒ README.md
   - **Effort:** LOW (~30 ะผะธะฝัั)
   - **Impact:** MEDIUM (ัะปัััะฐะตั onboarding)

2. **ะััะธัะตะบัััะฝัะต ัะตััั:** ะะพะฑะฐะฒะธัั ัะตััั ะดะปั ะฟัะพะฒะตัะบะธ ะธะทะพะปััะธะธ ัะปะพะตะฒ
   - **Effort:** MEDIUM (~2-3 ัะฐัะฐ)
   - **Impact:** HIGH (ะฟัะตะดะพัะฒัะฐัะฐะตั ะฝะฐัััะตะฝะธั ะฒ ะฑัะดััะตะผ)
   - **ะัะธะผะตั:** Jest/Vitest ั ะฐััะธัะตะบัััะฝัะผะธ constraints

---

## ๐ ะกัะฐะฒะฝะตะฝะธะต ั baseline

| ะะตััะธะบะฐ | ะฆะตะปะตะฒะพะต ะทะฝะฐัะตะฝะธะต | ะคะฐะบัะธัะตัะบะพะต | ะกัะฐััั |
|---------|------------------|-------------|--------|
| ะะฐัััะตะฝะธะน ะธะทะพะปััะธะธ ัะปะพะตะฒ | 0 | 0 | โ PASS |
| Bypass Facade | 0 | 0 | โ PASS |
| ะะฑัะฐัะฝัั ะทะฐะฒะธัะธะผะพััะตะน | 0 | 0 | โ PASS |

---

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

- [x] ะัะพะฒะตัะบะฐ ะธะทะพะปััะธะธ tracker_api ะพั MCP
- [x] ะัะพะฒะตัะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั Facade
- [x] ะัะพะฒะตัะบะฐ ัะฐัะฟะพะปะพะถะตะฝะธั composition-root
- [x] ะะฝะฐะปะธะท ะณัะฐัะฐ ะทะฐะฒะธัะธะผะพััะตะน ัะปะพะตะฒ
- [ ] ะะตัะตัะพะด ะบ ะฐะฝะฐะปะธะทั ะฟะฐััะตัะฝะพะฒ ะธะผะฟะพััะพะฒ (ัะปะตะดัััะฐั ะทะฐะดะฐัะฐ)
