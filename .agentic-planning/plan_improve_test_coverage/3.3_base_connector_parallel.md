# –≠—Ç–∞–ø 3.3: Base Connector platform –º–µ—Ç–æ–¥—ã (Parallel)

**–¶–µ–ª—å:** –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ platform –º–µ—Ç–æ–¥—ã base-connector.ts (67% ‚Üí 90%+)

**–¢–∏–ø –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** Parallel (–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å 3.1 –∏ 3.2)

**–§–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** `packages/servers/yandex-tracker/src/cli/connectors/base/base-connector.ts`

**–°–æ–∑–¥–∞–≤–∞–µ–º—ã–π —Ñ–∞–π–ª:** `packages/servers/yandex-tracker/tests/cli/connectors/base/base-connector.test.ts`

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 30-60 –º–∏–Ω—É—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û

---

## –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–¥–∞—á

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ `src/cli/connectors/base/base-connector.ts`
- [ ] –ò–∑—É—á–∏—Ç—å –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏: 40-49
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–µ–ø–æ–∫—Ä—ã—Ç—ã–µ –º–µ—Ç–æ–¥—ã:
  - `isPlatformSupported()` (—Å—Ç—Ä–æ–∫–∏ 39-43)
  - `getCurrentPlatform()` (—Å—Ç—Ä–æ–∫–∏ 48-50)
- [ ] –ò–∑—É—á–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö connectors:
  - `tests/cli/connectors/claude-code/claude-code.connector.test.ts`
  - –ü–æ–Ω—è—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è connectors

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `tests/cli/connectors/base/base-connector.test.ts`
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ vitest
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å BaseConnector –∏–∑ `#cli/connectors/base/base-connector.js`
- [ ] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å `os` –¥–ª—è –º–æ–∫–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π `describe('BaseConnector', ...)` –±–ª–æ–∫

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–∫–æ–≤ –¥–ª—è `os.platform()`

**–í–ê–ñ–ù–û:** –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å platform-independent, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å `os.platform()`

- [ ] –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–∫:
  ```typescript
  import { vi } from 'vitest';
  import * as os from 'os';

  vi.mock('os', () => ({
    platform: vi.fn(),
  }));
  ```
- [ ] –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vi.spyOn(os, 'platform')` –≤ —Ç–µ—Å—Ç–∞—Ö

### 4. –¢–µ—Å—Ç—ã –¥–ª—è `getCurrentPlatform()`

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ `os.platform()`

- [ ] **describe('getCurrentPlatform'):**
  - [ ] –¢–µ—Å—Ç: –≤–æ–∑–≤—Ä–∞—Ç 'darwin' (macOS)
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'darwin'`
    - –°–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä BaseConnector (–∏–ª–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞)
    - –í—ã–∑–≤–∞—Ç—å `connector.getCurrentPlatform()`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ä–µ–∑—É–ª—å—Ç–∞—Ç = `'darwin'`
  - [ ] –¢–µ—Å—Ç: –≤–æ–∑–≤—Ä–∞—Ç 'linux'
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'linux'`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ä–µ–∑—É–ª—å—Ç–∞—Ç = `'linux'`
  - [ ] –¢–µ—Å—Ç: –≤–æ–∑–≤—Ä–∞—Ç 'win32' (Windows)
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'win32'`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ä–µ–∑—É–ª—å—Ç–∞—Ç = `'win32'`
  - [ ] –¢–µ—Å—Ç: –≤–æ–∑–≤—Ä–∞—Ç –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'freebsd'`, `'aix'`, `'sunos'`
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### 5. –¢–µ—Å—Ç—ã –¥–ª—è `isPlatformSupported()`

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è connector'–æ–º

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç–æ–¥ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `supportedPlatforms` –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º connector'–µ

- [ ] –ò–∑—É—á–∏—Ç—å –ª–æ–≥–∏–∫—É `isPlatformSupported()`:
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Ç–µ–∫—É—â–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤ –º–∞—Å—Å–∏–≤–µ `this.supportedPlatforms`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫ BaseConnector –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
  ```typescript
  class TestConnector extends BaseConnector {
    constructor(supportedPlatforms: NodeJS.Platform[]) {
      super();
      this.supportedPlatforms = supportedPlatforms;
    }
    // —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã (–∑–∞–≥–ª—É—à–∫–∏)
  }
  ```
- [ ] **describe('isPlatformSupported'):**
  - [ ] –¢–µ—Å—Ç: —Ç–µ–∫—É—â–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤ —Å–ø–∏—Å–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'darwin'`
    - –°–æ–∑–¥–∞—Ç—å connector —Å `supportedPlatforms: ['darwin', 'linux']`
    - –í—ã–∑–≤–∞—Ç—å `connector.isPlatformSupported()`
    - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `true`
  - [ ] –¢–µ—Å—Ç: —Ç–µ–∫—É—â–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ù–ï –≤ —Å–ø–∏—Å–∫–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö
    - –ú–æ–∫: `os.platform()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `'win32'`
    - –°–æ–∑–¥–∞—Ç—å connector —Å `supportedPlatforms: ['darwin', 'linux']`
    - –í—ã–∑–≤–∞—Ç—å `connector.isPlatformSupported()`
    - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `false`
  - [ ] –¢–µ—Å—Ç: –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
    - –°–æ–∑–¥–∞—Ç—å connector —Å `supportedPlatforms: []`
    - –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `false` –¥–ª—è –ª—é–±–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  - [ ] –¢–µ—Å—Ç: –≤—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
    - –°–æ–∑–¥–∞—Ç—å connector —Å `supportedPlatforms: ['darwin', 'linux', 'win32', 'freebsd']`
    - –ú–æ–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
    - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –≤—Å–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `true`

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç (–∫–æ–º–±–∏–Ω–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤)

- [ ] –¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `isPlatformSupported` –æ—Ç `getCurrentPlatform`
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `isPlatformSupported` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `getCurrentPlatform` –≤–Ω—É—Ç—Ä–∏
  - –ò–∑–º–µ–Ω–∏—Ç—å –º–æ–∫ `os.platform()` –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `isPlatformSupported` —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 7. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `npm test base-connector.test.ts`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚â• 90%
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç—Ä–æ–∫–∏ 40-49 —Ç–µ–ø–µ—Ä—å –ø–æ–∫—Ä—ã—Ç—ã
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å failing —Ç–µ—Å—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ESLint: `npm run lint`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TypeScript: `npm run typecheck`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–ª—è—Ü–∏—é: –º–æ–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–æ–∫–∏ –¥–ª—è os.platform()
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `vi.spyOn(os, 'platform')` –∏–ª–∏ `vi.mock('os')`
- –í `beforeEach` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –º–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- –í `afterEach` —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –º–æ–∫–∏: `vi.restoreAllMocks()`

### –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å-–Ω–∞—Å–ª–µ–¥–Ω–∏–∫
- BaseConnector –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤

### –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–æ–∫
- –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ú–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –æ—á–∏—â–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è `getCurrentPlatform()` –∏ `isPlatformSupported()` –Ω–∞–ø–∏—Å–∞–Ω—ã
‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ base-connector.ts ‚â• 90%
‚úÖ –°—Ç—Ä–æ–∫–∏ 40-49 —Ç–µ–ø–µ—Ä—å –ø–æ–∫—Ä—ã—Ç—ã
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ ~8 —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤
‚úÖ –ú–æ–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ –ù–µ—Ç ESLint/TypeScript –æ—à–∏–±–æ–∫

---

## –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:
1. –ö–æ–º–º–∏—Ç: `chore: –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è base-connector platform –º–µ—Ç–æ–¥–æ–≤ (67% ‚Üí 90%+)`
2. –ü—É—à –≤ –≤–µ—Ç–∫—É
