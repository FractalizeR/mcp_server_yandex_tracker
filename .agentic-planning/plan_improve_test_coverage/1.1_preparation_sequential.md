# Этап 1.1: Подготовка инфраструктуры (Sequential)

**Цель:** Подготовить окружение и изучить существующие паттерны тестирования перед написанием новых тестов.

**Тип выполнения:** Sequential (должно быть выполнено перед этапами 2.x)

**Оценка времени:** 30 минут

---

## Чек-лист задач

### 1. Изучение существующих паттернов тестирования

- [ ] Прочитать `packages/servers/yandex-tracker/tests/README.md`
- [ ] Изучить структуру существующих unit тестов:
  - [ ] `tests/tracker_api/utils/duration.util.test.ts` — пример тестирования утилит
  - [ ] `tests/tracker_api/api_operations/base-operation.test.ts` — пример моков
- [ ] Изучить mock factories:
  - [ ] `tests/helpers/mock-factories.ts` — доступные фабрики моков
  - [ ] Понять паттерн использования `createMockLogger`, `createMockHttpClient`
- [ ] Изучить структуру интеграционных тестов:
  - [ ] `tests/integration/tools/api/issues/get/get-issues.tool.integration.test.ts`
  - [ ] Понять использование `MockServer`, `TestMCPClient`

### 2. Проверка окружения

- [ ] Убедиться, что все зависимости установлены: `npm install`
- [ ] Проверить, что тесты запускаются: `npm test --workspace=@mcp-server/yandex-tracker`
- [ ] Проверить текущее покрытие: `npm run test:coverage --workspace=@mcp-server/yandex-tracker`

### 3. Подготовка helper-функций (если нужны)

- [ ] Проверить наличие file system моков в `tests/helpers/`
- [ ] Если нужны дополнительные моки для `fs.promises` — запланировать создание
- [ ] Проверить наличие fixtures для тестирования файлов в `tests/test-files/`

### 4. Документирование найденных паттернов

- [ ] Записать общий паттерн unit теста для утилит:
  - Структура describe/it
  - Использование beforeEach/afterEach
  - Naming conventions
- [ ] Записать паттерн для тестирования async функций
- [ ] Записать паттерн для тестирования функций с side effects (file system)

---

## Критерии готовности

✅ Изучены все примеры тестов
✅ Окружение готово к запуску тестов
✅ Понятны паттерны и конвенции тестирования
✅ Определены необходимые helper-функции

---

## Следующий шаг

После завершения этого этапа можно переходить к параллельному выполнению этапов 2.1 и 2.2.

**Рекомендация:** Этапы 2.1 и 2.2 можно выполнять в разных ветках параллельно разными агентами.
