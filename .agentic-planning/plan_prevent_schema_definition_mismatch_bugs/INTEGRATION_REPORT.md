# –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –±–∞–≥–æ–≤ Schema-Definition Mismatch

**–î–∞—Ç–∞:** 2025-11-21
**–ü–æ–¥—Ö–æ–¥:** Refactoring-First (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è MCP definition –∏–∑ Zod schema)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –ø–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞**

---

## üéØ –¶–µ–ª—å –ø–ª–∞–Ω–∞

–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –±–∞–≥–∏ schema-definition mismatch —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é MCP definition –∏–∑ Zod schema, —á—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.

**–ù–∞–π–¥–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- 4 –∏–∑ 33 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (12%) –∏–º–µ–ª–∏ –±–∞–≥ schema-definition mismatch
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –Ω–µ –≤—ã—è–≤–∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—É
- –ë–∞–≥ –¥–µ–ª–∞–ª –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª

**–†–µ—à–µ–Ω–∏–µ:**
- Zod schema = –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- MCP definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ schema —á–µ—Ä–µ–∑ `generateDefinitionFromSchema()`
- –§–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

### –≠—Ç–∞–ø 0.1: –ê–Ω–∞–ª–∏–∑ (100%)

- ‚úÖ –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω –±–∞–≥ –≤ 4 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
- ‚úÖ –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä definition –∏–∑ schema
- ‚úÖ –°–æ–∑–¥–∞–Ω ANALYSIS_RESULTS.md —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –∞–Ω–∞–ª–∏–∑–æ–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–æ–±–ª–µ–º–∞ –≤—ã—è–≤–ª–µ–Ω–∞, —Ä–µ—à–µ–Ω–∏–µ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ

---

### –≠—Ç–∞–ø 1.1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (100%)

**1. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä `generateDefinitionFromSchema` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `generateDefinitionFromSchema()` –≤ `@mcp-framework/core`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö Zod —Ç–∏–ø–æ–≤ (object, string, number, boolean, array, enum, union, optional, etc.)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ descriptions –∏–∑ `.describe()`
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ examples
- ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Zod constraints –≤ JSON Schema format
- ‚úÖ –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º (additionalProperties: false)

**2. BaseTool –æ–±–Ω–æ–≤–ª–µ–Ω:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `getParamsSchema()` –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞—Ö
- ‚úÖ –ú–µ—Ç–æ–¥ `getDefinition()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `getParamsSchema()` –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `generateDefinitionFromSchema()`
- ‚úÖ Fallback –Ω–∞ —Å—Ç–∞—Ä—ã–π `buildDefinition()` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

**3. –ü–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (2/49 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤):**
- ‚úÖ `get-issues` ‚Äî –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω (simple case)
- ‚úÖ `transition-issue` ‚Äî –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω (medium case)
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (1645/1645)

**4. –¢–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞:**
- ‚úÖ 77 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è `generateDefinitionFromSchema` (35+24+18)
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ Zod —Å—Ö–µ–º
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zod v4 native API –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**–ö–æ–º–º–∏—Ç—ã:**
- cc67474: —Ç–µ—Å—Ç—ã (WIP)
- 0f0d242: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Zod v4 native API
- a0a2dd9: –º–∏–≥—Ä–∞—Ü–∏—è get-issues –∏ transition-issue

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è, –ø–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞

---

### –≠—Ç–∞–ø 2.1: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (100%)

- ‚úÖ –°–æ–∑–¥–∞–Ω helper `expectSchemaDefinitionMatch()` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- ‚úÖ Smoke-—Ç–µ—Å—Ç—ã –¥–ª—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
  - `get-issues.smoke.test.ts`
  - `transition-issue.smoke.test.ts`
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ `tests/README.md`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ—Å—Ç—ã –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

### –≠—Ç–∞–ø 2.2: –ê–¥–∞–ø—Ç–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ (100%)

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –£–±—Ä–∞–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `.definition.ts` —Ñ–∞–π–ª–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Tool"
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω —Ä–∞–∑–¥–µ–ª "–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ API Tool"
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —á–µ–∫-–ª–∏—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è MCP Tool –≤ `yandex-tracker/CLAUDE.md`
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `getParamsSchema()`

**–ö–æ–º–º–∏—Ç:** 935b628

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

---

### –≠—Ç–∞–ø 2.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (100%)

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `CLAUDE.md` —Å –ø—Ä–∞–≤–∏–ª–æ–º –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `ARCHITECTURE.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º Schema-to-Definition Generator
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `packages/servers/yandex-tracker/src/tools/README.md` (495 —Å—Ç—Ä–æ–∫ < 500)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `packages/framework/core/README.md` (443 —Å—Ç—Ä–æ–∫ < 600)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–π–¥–µ–Ω–∞
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–ö–æ–º–º–∏—Ç:** 7571168

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

### –≠—Ç–∞–ø 3.1: –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (100%)

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —ç—Ç–∞–ø–æ–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã (`npm run validate:quiet`)
  - Build ‚úÖ
  - Typecheck ‚úÖ
  - Lint ‚úÖ
  - Tests ‚úÖ (1645/1645 yandex-tracker + 212 infrastructure + 173 core + 135 search = **2165 tests passed**)
  - Code duplication check ‚úÖ
  - Dependency cruise ‚úÖ
  - Documentation validation ‚úÖ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ (2/49 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **–í—Å–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:** 49
- **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ:** 2 (4%)
- **–û—Å—Ç–∞–ª–æ—Å—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:** 47 (96%)
- **–§–∞–π–ª–æ–≤ `.definition.ts`:** 49 (–±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏)

### –¢–µ—Å—Ç—ã:
- **Core framework:** 173/173 ‚úÖ
- **Infrastructure:** 212/212 ‚úÖ
- **Search:** 135/135 ‚úÖ
- **Yandex-tracker:** 1645/1645 ‚úÖ
- **–ò—Ç–æ–≥–æ:** 2165/2165 ‚úÖ

### –ü–æ–∫—Ä—ã—Ç–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞:
- **–¢–µ—Å—Ç–æ–≤ –¥–ª—è `generateDefinitionFromSchema`:** 77
- **–¢–∏–ø—ã Zod:** –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –ø–æ–∫—Ä—ã—Ç—ã

---

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:

1. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**
   - `generateDefinitionFromSchema()` –≤ `@mcp-framework/core/definition`
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö Zod —Ç–∏–ø–æ–≤
   - 77 unit-—Ç–µ—Å—Ç–æ–≤ —Å 100% –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

2. **BaseTool –æ–±–Ω–æ–≤–ª–µ–Ω**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `getParamsSchema()`
   - Fallback –Ω–∞ `buildDefinition()` –¥–ª—è legacy tools
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

3. **–ü–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞**
   - 2 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
   - Proof of concept –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω

4. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞**
   - –¢–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –®–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

5. **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**
   - `npm run validate` –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
   - –í—Å–µ 2165 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
   - ESLint, TypeScript, jscpd ‚Äî –±–µ–∑ –æ—à–∏–±–æ–∫

### ‚è≥ –û—Å—Ç–∞–µ—Ç—Å—è (–≤–Ω–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–ª–∞–Ω–∞):

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** (47/49)
   - –¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏
   - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (–ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏–ª–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)
   - –†–∏—Å–∫: breaking changes –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

2. **–£–¥–∞–ª–µ–Ω–∏–µ `.definition.ts` —Ñ–∞–π–ª–æ–≤**
   - –ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   - 49 —Ñ–∞–π–ª–æ–≤ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

1. **–§–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω schema-definition mismatch**
   - Definition –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ schema –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (DRY principle)

2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
   - –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å `.definition.ts` —Ñ–∞–π–ª
   - –ù–µ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å schema ‚Üî definition –≤—Ä—É—á–Ω—É—é
   - –ú–µ–Ω—å—à–µ –∫–æ–¥–∞, –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ schema –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ definition
   - –ù–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –æ–±–Ω–æ–≤–ª—è—Ç—å definition –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ schema

4. **–õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**
   - –ú–µ–Ω—å—à–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –ü—Ä–æ—â–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
   - –õ–µ–≥—á–µ –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫–∏

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ü–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (4% –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)**
   - –¢–æ–ª—å–∫–æ 2 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
   - 47 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥
   - `.definition.ts` —Ñ–∞–π–ª—ã –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∫–∞–∫ fallback

2. **–°–ª–æ–∂–Ω—ã–µ —Å—Ö–µ–º—ã**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ edge cases –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–≥–æ definition
   - Fallback –Ω–∞ `buildDefinition()` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤

3. **Breaking changes**
   - –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–∂–µ—Ç –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
   - –¢—Ä–µ–±—É–µ—Ç—Å—è —Ç—â–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### 1. –ü–ª–∞–Ω –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–ª–∞–Ω –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 47 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:**
- **High priority** (10-15 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤): —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ, –ø—Ä–æ—Å—Ç—ã–µ
- **Medium priority** (20-25 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤): —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **Low priority** (12-17 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤): —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–ª–∏ —Å–ª–æ–∂–Ω—ã–µ

**–ü–æ–¥—Ö–æ–¥:**
- –ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (queues ‚Üí issues ‚Üí comments ‚Üí etc.)
- Thorough testing –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ö–æ–º–º–∏—Ç –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 3-5 —á–∞—Å–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å—Ö–µ–º)

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ production
- –°–æ–±—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä

### 3. –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:
- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ `.definition.ts` —Ñ–∞–π–ª—ã
- –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥ `buildDefinition()` –∏–∑ BaseTool (breaking change!)
- –£–¥–∞–ª–∏—Ç—å helper –∫–ª–∞—Å—Å—ã –∏–∑ `base-definition.ts`

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [CLAUDE.md](../../CLAUDE.md) ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
- [ARCHITECTURE.md](../../ARCHITECTURE.md) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞
- [packages/servers/yandex-tracker/src/tools/README.md](../../packages/servers/yandex-tracker/src/tools/README.md) ‚Äî –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ tools
- [packages/framework/core/README.md](../../packages/framework/core/README.md) ‚Äî API Core package

### –ö–æ–¥:
- `packages/framework/core/src/definition/generator.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä definition
- `packages/framework/core/src/tools/base/base-tool.ts` ‚Äî BaseTool —Å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π
- `packages/servers/yandex-tracker/src/tools/api/issues/get/get-issues.tool.ts` ‚Äî –ø—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç—ã:
- `packages/framework/core/tests/definition/` ‚Äî —Ç–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ (77 tests)
- `packages/servers/yandex-tracker/tests/tools/api/issues/get/get-issues.smoke.test.ts` ‚Äî smoke test

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ MCP definition –∏–∑ Zod schema:

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ BaseTool –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- ‚úÖ –ü–∏–ª–æ—Ç–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- ‚úÖ –¢–µ—Å—Ç—ã, —à–∞–±–ª–æ–Ω—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ 2165 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ `npm run validate` –±–µ–∑ –æ—à–∏–±–æ–∫

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω –ø–æ–ª–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 47 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–ø–æ –∂–µ–ª–∞–Ω–∏—é).

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –∞ —Å—Ç–∞—Ä—ã–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥).

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-11-21
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~8 —á–∞—Å–æ–≤ (–≤—Å–µ —ç—Ç–∞–ø—ã)
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ‚úÖ

ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é Claude Code
Co-Authored-By: Claude <noreply@anthropic.com>
