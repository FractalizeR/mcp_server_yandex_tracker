# 2.4 Attachments API - Добавление обязательного `fields` (Parallel)

**Тип:** Parallel | **Приоритет:** Критический | **Tools:** 2

---

## Tools

1. **get_attachments** - список файлов (возвращает Attachment[])
2. **upload_attachment** - загрузка (возвращает Attachment)

**Не требует:** `download_attachment`, `get_thumbnail` (binary), `delete_attachment` (void)

---

## Особенности

**ВАЖНО:** В `get_attachments.tool.ts` есть ручная фильтрация полей (строки 66-78) - **УДАЛИТЬ** и заменить на `ResponseFieldFilter`.

---

## Изменения

### get_attachments
- **Schema:** `src/tools/api/issues/attachments/get/get-attachments.schema.ts` → `fields: FieldsSchema`
- **Tool:** `src/tools/api/issues/attachments/get/get-attachments.tool.ts`
  - **УДАЛИТЬ ручную фильтрацию** (строки 66-78)
  - **ДОБАВИТЬ:** `attachments.map(a => ResponseFieldFilter.filter(a, fields))`
- **Tests:** Добавить `fields: ['id', 'name', 'size']`

### upload_attachment
- **Schema:** `src/tools/api/issues/attachments/upload/upload-attachment.schema.ts` → `fields: FieldsSchema`
- **Tool:** `src/tools/api/issues/attachments/upload/upload-attachment.tool.ts` → `ResponseFieldFilter.filter(attachment, fields)`
- **Tests:** Добавить `fields`

---

## Коммит

```bash
git commit -m "feat(attachments): добавить обязательный параметр fields, убрать ручную фильтрацию

- Удалена ручная фильтрация в get_attachments
- Используется ResponseFieldFilter во всех attachment tools"
```
